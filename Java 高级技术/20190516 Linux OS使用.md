---
title: 20190516 Linux 使用
date: 2019-05-16
categories: ['后端']
tags: ['linux']
---

# 1 Linux 介绍

Linux 基于 Unix，万物皆文件。

内核特点：支持 **多CPU** 

应用领域广: 智能设备、后台服务器、云计算、大数据



# 2  Linux 安装

### 2.1 安装虚拟机 VMware

在 window 环境运行 linux 系统环境的软件

### 2.2 安装 CentOS

Centos 6.5 

### 2.3 安装 Xshell 软件



# 3  Linux 常用的命令介绍

## 1 pwd 

print working directory - 输出当前工作目录

### 2   /

根目录 .unix 和 Linux 中，没有盘符 一个硬盘，一个根。

### 3  /bin

系统的常用命令目录。

### 4  /etc 

发布目录，相当于 windows 系统中 windows 目录，保存系统的所有核心内容。

要求控制权权限高，建议不要随便读写。

### 5  /usr

用户目录，常用与安装系统所有用户共用的软件资源

### 6 /root

root 根用户的用户目录，称为用户主目录

### 7  /home

保存其他用户主目录的目录

### 8  /var 

系统运行过程的数据目录



## 2 cd 

切换目录

. 表示当前目录

.. 表示返回上级目录

### 2.1  切换固定位置

cd /aa/bb/xx

### 2.2  切换相对位置

cd aa/bb/xx

### 2.3 进入主目录

cd ~ 进入用户目录

cd  默认不给定参数，也直接进入用户根目录

```shell
[root@node6 Desktop]# cd 
[root@node6 ~]# ls
anaconda-ks.cfg  Documents  install.log.syslog  Pictures  Templates
Desktop          Downloads  Music               Public    Videos
```

## 3 ls 

list  - 列表当前目录

### 3.1  查看目录内容

list （相对路径/绝对路径）

### 3.2  查看全部内容

`list -a` 【目录】

list all - 查看所有，包括隐藏文件 .lunux 中的隐藏文件都是以‘.’ 开头的文件

```shell
[root@node6 /]# ls -a
.   .autofsck  boot  etc   html  lib64       media  mout    opt   root  selinux  sys  usr
..  bin        dev   home  lib   lost+found  mnt    myJava  proc  sbin  srv      tmp  var
```

### 3.3 列表查看目录内容

`ls -l `[目录]

简化命令 ` ll`

```shell
[root@node6 /]# ls -l
total 110
dr-xr-xr-x.   2 root root  4096 Feb  1  2018 bin
dr-xr-xr-x.   5 root root  1024 Jan 21  2018 boot
drwxr-xr-x.  18 root root  3780 Mar 21 08:20 dev
drwxr-xr-x. 103 root root 12288 May 16 17:07 etc
drwxr-xr-x.   6 root root  4096 Jan 23  2018 home
-rw-r--r--.   1 root root     9 Mar 19 22:00 html
dr-xr-xr-x.  10 root root  4096 Jan 21  2018 lib
dr-xr-xr-x.   9 root root 12288 Feb  1  2018 lib64
drwx------.   2 root root 16384 Jan 21  2018 lost+found
drwxr-xr-x.   3 root root  4096 Mar 21 21:42 media
drwxr-xr-x.   2 root root  4096 Jan 21  2018 mnt
-rw-r--r--.   1 root root  1110 Mar 24  2018 mout
drwxr-xr-x.   2 root root  4096 Mar 19 22:46 myJava
drwxr-xr-x.   3 root root  4096 Jan 21  2018 opt
dr-xr-xr-x. 151 root root     0 Mar 21 08:20 proc
dr-xr-x---.  27 root root  4096 Mar 21 22:48 root
dr-xr-xr-x.   2 root root 12288 Feb  1  2018 sbin
drwxr-xr-x.   7 root root     0 Mar 21 08:20 selinux
drwxr-xr-x.   2 root root  4096 Sep 23  2011 srv
drwxr-xr-x.  13 root root     0 Mar 21 08:20 sys
drwxrwxrwt.  30 root root  4096 May 16 17:30 tmp
drwxr-xr-x.  18 root root  4096 Mar 21 22:51 usr
drwxr-xr-x.  21 root root  4096 Jan 21  2018 var
```

其中以 d 开头是目录，` -` 以开头表示文件。

r 表示读权限，w表示写权限，x 表示执行权限

![](http://www.zwer.xyz/picGo/20190517084040.png)



### 3.4 容量	 

单位是字节，所有的目录固定容量为 4096

### 3.5 权限

分为不同的角色:文件的所有者，就是创建文件的用户，所在组和所有者同一个组的其他用户` . `其他用户，和所有者不在一个组的用户。

rwx  -read write  execut

‘-’  代表没有对应的权限



##  4 clear 

clear 清屏 和 clear screen

## 5  touch 

创建空白文件

在linux 系统中，文件不需要强制后后缀名

### 5.1  使用方式

touch 文件名 ，在当前目录创建文件

touch 目录/文件名， 

## 6  cat 

显示文件全部内容

## 7 more 

分屏显示文件内容， 显示后，使用空格显示下一页，使用回车显示下一行，ctr+c 退出。

## 8 head 

显示文件的前多少行，默认显示文件前十行内容。

`head -number filelname`

显示文件的前 number 行

```shell
[root@node6 ~]# head anaconda-ks.cfg 
# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto dhcp
rootpw  --iscrypted $1$9/wjzRav$R3Rd/nR8RSWqqjRSLxpdL0
# Reboot after installation
```

## 9 tail 

显示文件的末尾多少行，默认显示文件后十行内容

`tail number filename `

```shell
[root@node6 ~]# tail anaconda-ks.cfg 
 if [ -x /usr/sbin/getenforce ]; then /usr/sbin/setenforce \$oldenforce || true; fi
if [ -x /bin/systemd ]; then systemctl restart prefdm.service; else telinit 5; fi
EOF
chmod 755 /etc/rc.d/rc.local
if [ -x /bin/systemd ]; then systemctl enable rc-local.service; fi
/usr/sbin/adduser zwz
/usr/sbin/usermod -p '$1$9/wjzRav$R3Rd/nR8RSWqqjRSLxpdL0' zwz
/usr/bin/chfn -f "zwz" zwz
/bin/echo done
%end
```

## 10  mkdir

```shell
make directory -创建目录
```

### 10.1 创建一个相对目录

即在当前目录下创建一个文件夹

```shell
mkdir directory  
```

### 10.2  创建一个绝对目录创建文件

即在 根目录 `/`开始创建目录

```shell
mkdir /aa/bb/directory
```

### 10.3  一次性创建多级目录

```shell
mkdir  -p  /parentDirectory/childrenDirectory
```



## 11 cp

 copy -复制命令

### 11.1 使用方式

`copy source  target`

source 表示要拷贝的文件或者目录 ，注意拷贝目录要加参数 -r 

traget 表示目录信息，若后面指定文件名

### 11.2 拷贝文件

```shell
[root@node6 aa]# touch hello.txt
[root@node6 aa]# ls
bb  hello.txt
[root@node6 aa]# cp hello.txt hello1.txt
[root@node6 aa]# ls
bb  hello1.txt  hello.txt
[root@node6 aa]# cp hello.txt bb/hello2.txt
[root@node6 aa]# cd bb
[root@node6 bb]# ls
hello2.txt
```

### 11.3  拷贝目录

`cp -r sourceDirectory  targetDirectory`

```shell
[root@node6 Desktop]# cp aa aa1
cp: omitting directory `aa'
[root@node6 Desktop]# cp -r  aa aa1
[root@node6 Desktop]# ls
```



## 12 rm 

remove -删除

### 12.1 使用方式 

`remove source` 删除，有提示

### 12.2  删除文件

`remove -f  source`  删除文件，没有提示

### 12.3 删除目录

`rm  -r  directoryName  `参数 -r 必须添加，表示递归删除子目录及文件，否则不能删除目录

`rm -rf  directoryName `删除目录，不提示

```shell
[root@node6 aa]# ls
bb  cc  hello1.txt
[root@node6 aa]# rm cc
rm: cannot remove `cc': Is a directory
[root@node6 aa]# rm -r cc
rm: descend into directory `cc'? n
[root@node6 aa]# rm -rf cc
[root@node6 aa]# ls
bb  hello1.txt
```



## 13 mv 

move - 移动或重命名

### 13.1 使用方式

`move source  target ` 移动

`mv  source newFileName` 重命名

```shell
[root@node6 Desktop]# cd aa
[root@node6 aa]# ls
bb  hello1.txt  hello.txt
[root@node6 aa]# mv hello.txt helloWord.txt
[root@node6 aa]# ls
bb  hello1.txt  helloWord.txt
[root@node6 aa]# mv helloWord.txt bb/
[root@node6 aa]# cd bb
[root@node6 bb]# ls
hello2.txt  helloWord.txt
```

## 14  vi|vim

编辑文件，vim是增强命令，不是所有linux 版本都支持。vim 增强在有高亮显示。

### 14.1使用方式

`vi fileName `

### 14.2 命令模式

是控制编辑的文件的状态的，如：保存，退出

#### 14.2.1 进入编辑模式：

a -append，追加的方式进入编辑模式,位置在当前光标位置之后

i -insert，插入的方式进入编辑模式，位置在当前光标位置之前

o -underline ，在光标所在位置，新增一行，进入编辑模式

O -preline ，在光标所在位置的行前，新增一行，进入编辑模式

#### 14.2.2 dd

[number] dd -dlete line 删除指定行，默认一行

#### 14.2.3  :w

write - 保存

#### 14.2.4  :q

quit  退出

#### 14.2.5  :q!

强制退出不提示

#### 14.2.6  :set nu

显示行号

### 14.2.7 /keyword

查找关键字

#### 14.2.8 G

跳转到文件末尾

### 14.2.9 gg

光标跳转到文件头



## 15  ifconfig

> 查看网络编辑器，查看网卡信息

eth0 表示网卡信息

lo -localhsot，本地环绕信息

```shell
[root@node6 aa]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0C:29:04:94:F8  
          inet addr:192.168.170.8  Bcast:192.168.170.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe04:94f8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:63384 errors:0 dropped:0 overruns:0 frame:0
          TX packets:25407 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:74886225 (71.4 MiB)  TX bytes:2189499 (2.0 MiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:309 errors:0 dropped:0 overruns:0 frame:0
          TX packets:309 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:171242 (167.2 KiB)  TX bytes:171242 (167.2 KiB)
```

### 15.1 ifconfig -a 

> 查看全部网卡信息

```shell
[root@node6 network-scripts]# ifconfig -a
eth0      Link encap:Ethernet  HWaddr 00:0C:29:04:94:F8  
          inet addr:192.168.170.8  Bcast:192.168.170.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe04:94f8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:63852 errors:0 dropped:0 overruns:0 frame:0
          TX packets:25669 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:74929053 (71.4 MiB)  TX bytes:2230063 (2.1 MiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:309 errors:0 dropped:0 overruns:0 frame:0
          TX packets:309 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:171242 (167.2 KiB)  TX bytes:171242 (167.2 KiB)
```

### 15.2 查看当前网卡的信息

```shell
[root@node6 ~]# cd /etc/sysconfig/network-scripts/
[root@node6 network-scripts]# ls
ifcfg-eth0   ifdown-ipv6    ifdown-tunnel  ifup-ipv6   ifup-routes       network-functions
ifcfg-lo     ifdown-isdn    ifup           ifup-isdn   ifup-sit          network-functions-ipv6
ifdown       ifdown-post    ifup-aliases   ifup-plip   ifup-tunnel
ifdown-bnep  ifdown-ppp     ifup-bnep      ifup-plusb  ifup-wireless
ifdown-eth   ifdown-routes  ifup-eth       ifup-post   init.ipv6-global
ifdown-ippp  ifdown-sit     ifup-ippp      ifup-ppp    net.hotplug
```

### 15.3 编辑网卡

将 动态 IP 修改为 静态 IP 

```shell
DEVICE=eth0 
BOOTPROTO=static 
ONBOOT=yes 
IPADDR=(设置IP地址) 
NETMASK=255.255.255.0 
GATEWAY=（设置网关） 
DNS1=114.114.114.114 
DNS2=4.4.4.4
IPV6INIT=no
```



## 16 service 

服务控制命令，常用服务：iptable -防火墙，vsfpd fpt  服务起，mysql

防火墙建议关闭，否则除 80,22端口 外，其他所有端口无法访问

#### 16.1 使用方式

service 服务名称   start/stop/status/restart

eg.  service iptables start 启动防火墙

## 17 ps

查看当前的进程信息 ，相当于 window 下的任务管理器查看进程信息。

### 17.1 使用方式

ps  aux [| grep keyword]

```shell
[root@node6 ~]# ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root          1  0.0  0.2  19364  1100 ?        Ss   15:49   0:02 /sbin/init
root          2  0.0  0.0      0     0 ?        S    15:49   0:00 [kthreadd]
root          3  0.0  0.0      0     0 ?        S    15:49   0:00 [migration/0]
root          4  0.0  0.0      0     0 ?        S    15:49   0:00 [ksoftirqd/0]
root          5  0.0  0.0      0     0 ?        S    15:49   0:00 [stopper/0]
root          6  0.0  0.0      0     0 ?        S    15:49   0:00 [watchdog/0]
root          7  0.0  0.0      0     0 ?        S    15:49   0:07 [events/0]
root          8  0.0  0.0      0     0 ?        S    15:49   0:00 [cgroup]
root          9  0.0  0.0      0     0 ?        S    15:49   0:00 [khelper]
root         10  0.0  0.0      0     0 ?        S    15:49   0:00 [netns]
root         11  0.0  0.0      0     0 ?        S    15:49   0:00 [async/mgr]
root         12  0.0  0.0      0     0 ?        S    15:49   0:00 [pm]
root         13  0.0  0.0      0     0 ?        S    15:49   0:00 [sync_supers]
root         14  0.0  0.0      0     0 ?        S    15:49   0:00 [bdi-default]
root         15  0.0  0.0      0     0 ?        S    15:49   0:00 [kintegrityd/0]
root         16  0.0  0.0      0     0 ?        S    15:49   0:02 [kblockd/0]
root         17  0.0  0.0      0     0 ?        S    15:49   0:00 [kacpid]
root         18  0.0  0.0      0     0 ?        S    15:49   0:00 [kacpi_notify]
root         19  0.0  0.0      0     0 ?        S    15:49   0:00 [kacpi_hotplug]
root         20  0.0  0.0      0     0 ?        S    15:49   0:00 [ata_aux]
root         21  0.0  0.0      0     0 ?        S    15:49   0:00 [ata_sff/0]
root         22  0.0  0.0      0     0 ?        S    15:49   0:00 [ksuspend_usbd]
root         23  0.0  0.0      0     0 ?        S    15:49   0:00 [khubd]
root         24  0.0  0.0      0     0 ?        S    15:49   0:00 [kseriod]
root         25  0.0  0.0      0     0 ?        S    15:49   0:00 [md/0]
root         26  0.0  0.0      0     0 ?        S    15:49   0:00 [md_misc/0]
root         27  0.0  0.0      0     0 ?        S    15:49   0:00 [linkwatch]
root         29  0.0  0.0      0     0 ?        S    15:49   0:00 [khungtaskd]
root         30  0.0  0.0      0     0 ?        S    15:49   0:00 [kswapd0]
root         31  0.0  0.0      0     0 ?        SN   15:49   0:00 [ksmd]
root         32  0.0  0.0      0     0 ?        S    15:49   0:00 [aio/0]
root         33  0.0  0.0      0     0 ?        S    15:49   0:00 [crypto/0]
root         41  0.0  0.0      0     0 ?        S    15:49   0:00 [kthrotld/0]
root         42  0.0  0.0      0     0 ?        S    15:49   0:00 [pciehpd]
```

### 17.2  |

管道，在管道左侧命令直接结果基础上，执行管道右侧的命令

## 19  grep 

过滤 | 筛选，筛选符合关键字的数据

```shell
[root@node6 ~]# ps aux | grep network
root       7306  0.0  0.1 103252   840 pts/0    S+   19:08   0:00 grep network
```



# 3  软件安装

## 3.1 安装 JDK 

#### 3.1.1 软件上传

##### 使用  xtp 软件上传

##### 直接通过鼠标拖拽

## 3.2 文件解压

tar 命令

### 1常用方式

tar [参数] source  [target]

source 压缩文件

target 解压搜

解压缩 ` tar -zxf    压缩文件名`

解压缩  `tar -zxvf 压缩文件名`

压缩  `tar -czf    要压缩的目录 压缩后的文件名`

注意： f 参数一定要在最后出现

#### 1.1   z 

zip 格式压缩文件，包括 zip，gz，tar.gz 等格式，不包括 rar.

#### 1.2 x  

解压缩

#### 1.3  c

 创建压缩包

#### 1.4v

  显示解压过程

#### 1.5 f

 指定文件

## 3.3 配置环境变量

修改系统级环境变量配置文件，文件是 ：`/etc/profile`

JDk 解压后复制到了 /usr/local/java 目录中，这是配置环境变量的前提。

在配置文件中修改

```shell
export JAVA_HOME=/usr/local/jdk #jdk的位置
export CLASSPATH=.$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$JAVA_HOME/bin:$PATH
```

永久生效，重启机器` reboot`

临时生效，重新加载 `. /etc/profile`

# 4 Tomcat 软件安装

## 	4.1 软件安装

#### 上传软件资源到 Linux 上

#### 解压缩

#### 使用

```shell
#启动 tomcat 服务器
#进入 tomcat 根目录下
./bin/startup.sh
#关闭 tomcat 服务器
./bin/shutdown.sh
```

##### 查看日志

```shell
tail -f logs/catalina.out
#或者
tailf  logs/catalina.out
```

##### & 命令连接符

```shell
# 启动 tocmat 服务器并打印 tomcat 服务器输出语句
/bin/startup.sh & tail -f logs/catalina.out
# 或者
/bin/startup.sh & tailf logs/catalina.out
```

### 开放 8080 端口

```shell
/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT
/etc/rc.d/init.d/iptables save

#对于centos7
#先开启防火墙服务（如果防火墙运行中直接跳过）
systemctl start firewalld
#开启端口
firewall-cmd --add-port=8080/tcp --permanent
#(如果不行再开启80端口)
```



### 解决 tomcat 启动慢的问题

```shell
#进入 tomcat服务器的根目录
#执行 vi bin/catalina.sh
#找到 Java_OPTS 修改为下面的值
JAVA_OPTS="-Djava.security.egd=file:/dev/./urandom"
```



# 5 MySQL 安装

## 5.1  yum 安装

### 5.1.1 上传本地 yum 文件

在MySQL官网中下载YUM源rpm安装包：<http://dev.mysql.com/downloads/repo/yum/> 

或者

```shell
# 下载mysql源安装包
shell> wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm
# 安装mysql源
shell> yum localinstall mysql57-community-release-el7-8.noarch.rpm
```

### 5.1.2  增加本地 yum 信息

yum 安装，是通过远程的 yum 应用服务器下载安装包并安装软件的方式

yum 应用服务器中的数据是固定的

增加本地 yum 信息，相当于增加一个新的 yum 应用服务器中的软件列表

```shell
yum localinstall  文件名
```

### 5.1.3 yum 远程下载并安装

```shell
yum install mysql-server
#或者
yum install mysql-community-server
```

#### 5.1.4 启动 mysql 服务器

```shell
service mysqld start
```

### 5.1.5 设置 mysql 用户的密码

```shell
 /usr/bin/mysqladmin -u root password 'new-password'
```

## 5.2 授权

```shell
grant all privileges on *.* to 'root'@'%' identified by  'root' with grant option 
#grant all privileges 表示权限信息
#to 'mysql用户名'@'可访问的IP'
# % 代表所有 "identified by '用户密码' with  grant option"
```

### 5.2.2  刷新权限

```shell
#授权后一定要刷新权限信息
flush  privileges
```

### 5.2.3 访问测试

```shell
mysql -uroot -p【password】
#注意 -p 直接输入密码，不能有空格
```

### 5.2.4  开机自启

```shell
#Centos 6
chkconfig mysqld on   
#Centos 7
systemctl mysqld enable
```

## 5.3 访问任意位置的 mysql  数据库

```shell
mysql -u 用户名 -p密码 -h主机名或IP地址 -p端口号
```

